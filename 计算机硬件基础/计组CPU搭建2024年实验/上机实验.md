# 上机实验

需要在课下实验完成的CPU的基础上,**分别**(不需要在一个CPU中集成,只要分别实现每一条)实现以下4条指令

## 符号与术语定义 (Definitions)

*   PC: 程序计数器
*   **$R[x]$**: 通用寄存器堆中索引为 $x$ 的寄存器的值
    *   $rd$: 目的寄存器
    *   $rs$: 源寄存器 
    *   $rt$: 目标/源寄存器
*   **$Imm16$**: 16位立即数
*   **$Mem[addr]$**: 内存地址 $addr$ 处存储的数据
*   **$||$**: 位拼接操作符,将两个位序列首尾相连
*   **$SignExt$**: 符号扩展,将16位立即数按符号位扩展至32位
*   下标: 例如 $31..16$，表示提取该数据的第31位到第16位
*   Opcode: 操作码，指令的高6位
*   Special/Funct: 功能码，用于R型指令的低6位定义

## 指令集表 (Instruction Set Summary)

| 指令        | 类型 |  Opcode  |  Funct   | 汇编格式              | 含义                                                         |
| :---------- | :--: | :------: | :------: | :-------------------- | :----------------------------------------------------------- |
| **skip**    | J型  | `011101` |   N/A    | `skip`                | 跳过下一条指令 ($PC \leftarrow PC+8$)                        |
| **packhlu** | R型  | `000000` | `110001` | `packhlu rd, rs, rt`  | $R[rd] \leftarrow R[rs]_{31:16} \parallel R[rt]_{15:0}$      |
| **packhiu** | I型  | `010010` |   N/A    | `packhiu rt, rs, imm` | $R[rt] \leftarrow R[rs]_{31:16} \parallel Imm16$             |
| **jalrm**   | I型  | `010011` |   N/A    | `jalrm rt, imm(rs)`   | $PC \leftarrow Mem[R[rs]+SignExt(Imm16)]$; $R[rt] \leftarrow PC+4$ |
